name: Integration tests

on: [push]

jobs:
  test:
    runs-on: ubuntu-20.04

    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-python@v2
      with:
        python-version: '3.7'
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install setuptools wheel
    - name: Build and install
      run: |
        python setup.py bdist_wheel
        pip install dist/easy_fuse*.whl
    - name: Check the CLI entry point is there
      run: |
        easy-fuse --help
        easy-fuse pipeline --help
        easy-fuse annotation --help
        easy-fuse fusion-parser --help
        easy-fuse read-filter --help
        easy-fuse summarize-data --help
        easy-fuse qc-parser --help
        easy-fuse requantify --help
        easy-fuse read-selection --help
        easy-fuse skewer-wrapper --help
        easy-fuse soapfuse-wrapper --help
        easy-fuse count-reads --help
        easy-fuse star-index --help
